<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Prisma React Demo</title>
  <link rel="stylesheet" href="/webapp/styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div id="root" class="container"></div>
  <script type="text/babel">
    function Icon({ emoji, size=20 }) {
      return <span style={{ fontSize: size }}>{emoji}</span>
    }
    // Icon components fallback
    const Sparkles = (p) => <Icon emoji="‚ú®" {...p} />
    const Bell = (p) => <Icon emoji="üîî" {...p} />
    const Search = (p) => <Icon emoji="üîé" {...p} />
    const Filter = (p) => <Icon emoji="‚öôÔ∏è" {...p} />
    const Users = (p) => <Icon emoji="üë•" {...p} />
    const MapPin = (p) => <Icon emoji="üìç" {...p} />
    const CheckCheck = (p) => <Icon emoji="‚úÖ" {...p} />
    const Shield = (p) => <Icon emoji="üõ°Ô∏è" {...p} />
    const Zap = (p) => <Icon emoji="‚ö°" {...p} />
    const Flag = (p) => <Icon emoji="üö©" {...p} />
    const MessageCircle = (p) => <Icon emoji="üí¨" {...p} />
    const ChevronRight = (p) => <Icon emoji="‚Ä∫" {...p} />

    function NavBtn({ active, icon, label, onClick, badge }) {
      return (
        <button onClick={onClick} className={`flex flex-col items-center gap-1 w-16 transition-colors relative ${active ? 'text-[#03dac6]' : 'text-slate-400 hover:text-white'}`}>
          {icon}
          <span className="text-[10px] font-medium">{label}</span>
          {badge && (<span className="absolute -top-1 right-2 w-4 h-4 bg-red-500 text-white text-[9px] flex items-center justify-center rounded-full border border-slate-900">{badge}</span>)}
        </button>
      )
    }

    function App() {
      const [activeTab, setActiveTab] = React.useState('discover')
      const [showFilters, setShowFilters] = React.useState(false)
      const [selectedUser, setSelectedUser] = React.useState(null)
      const [showNav, setShowNav] = React.useState(true)
      const [lastScrollY, setLastScrollY] = React.useState(0)
      const [isScrolledTop, setIsScrolledTop] = React.useState(true)
      const scrollContainerRef = React.useRef(null)

      React.useEffect(() => {
        const handleScroll = () => {
          const currentScrollY = scrollContainerRef.current.scrollTop
          setIsScrolledTop(currentScrollY < 10)
          if (currentScrollY > lastScrollY && currentScrollY > 50) setShowNav(false)
          else setShowNav(true)
          setLastScrollY(currentScrollY)
        }
        const container = scrollContainerRef.current
        if (container) container.addEventListener('scroll', handleScroll)
        return () => container?.removeEventListener('scroll', handleScroll)
      }, [lastScrollY])

      const mockUsers = [
        { id: 1, name: 'Alex', age: 24, bio: 'Dise√±ador UX. Conexiones reales.', dist: '0.5 km', online: true, verified: true, tags: ['Arte','Tech','Cine'] },
        { id: 2, name: 'Sam', age: 28, bio: 'M√∫sico y viajero.', dist: '1.2 km', online: false, verified: false, tags: ['M√∫sica','Senderismo'] },
        { id: 3, name: 'Charlie', age: 22, bio: 'Good vibes only.', dist: '2.4 km', online: true, verified: true, tags: ['Baile','Yoga'] },
      ]

      return (
        <div className="flex flex-col h-screen bg-white font-sans max-w-md mx-auto overflow-hidden shadow-2xl relative border-x border-slate-100">
          <header className={`absolute top-0 w-full z-30 transition-all duration-300 px-6 py-4 flex items-center justify-between ${!isScrolledTop ? 'bg-white/90 backdrop-blur-md shadow-sm' : 'bg-transparent'}`}>
            <div className="flex items-center gap-3">
              <div className="w-9 h-9 bg-[#6200ea] rounded-lg flex items-center justify-center text-white shadow-md shadow-violet-200"><span className="font-bold text-lg">P</span></div>
              <h1 className="font-bold text-xl tracking-tight text-slate-900">Prisma</h1>
            </div>
            <button className="p-2 rounded-full hover:bg-slate-100 text-slate-600 transition-colors relative"><Bell size={22} /><span className="absolute top-2 right-2 w-2 h-2 bg-[#03dac6] rounded-full ring-2 ring-white"></span></button>
          </header>
          <main ref={scrollContainerRef} className="flex-1 overflow-y-auto pt-20 pb-24 scroll-smooth no-scrollbar bg-slate-50">
            {activeTab === 'discover' && (
              <div className="px-5 pb-10 space-y-6">
                <div className="flex gap-3">
                  <div className="flex-1 relative">
                    <Search size={18} /><input type="text" placeholder="Buscar..." className="w-full pl-3 pr-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm focus:outline-none focus:border-[#6200ea] focus:ring-1 focus:ring-[#6200ea] transition-all shadow-sm" />
                  </div>
                  <button onClick={() => setShowFilters(!showFilters)} className={`p-3 rounded-2xl border transition-all ${showFilters ? 'bg-[#6200ea] text-white border-[#6200ea]' : 'bg-white text-slate-600 border-slate-200'}`}><Filter size={20} /></button>
                </div>
                {showFilters && (
                  <div className="bg-white p-4 rounded-2xl border border-slate-100 shadow-sm">
                    <div className="flex flex-wrap gap-2">
                      {['Online','Cerca','Nuevos','Populares'].map(f => (<span key={f} className="px-3 py-1.5 rounded-full text-xs font-medium bg-slate-50 text-slate-600 border border-slate-200">{f}</span>))}
                    </div>
                  </div>
                )}
                <div>
                  <h2 className="text-lg font-bold text-slate-800 mb-4 px-1">Personas cerca</h2>
                  <div className="grid grid-cols-1 gap-4">
                    {mockUsers.map(user => (
                      <div key={user.id} onClick={() => setSelectedUser(user)} className="bg-white p-3 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all cursor-pointer flex gap-4">
                        <div className="w-20 h-20 bg-slate-200 rounded-xl relative overflow-hidden flex-shrink-0">
                          <Users size={24} />
                          {user.online && (<div className="absolute bottom-1 right-1 w-3.5 h-3.5 bg-[#03dac6] border-2 border-white rounded-full"></div>)}
                        </div>
                        <div className="flex-1 flex flex-col justify-center">
                          <div className="flex justify-between items-start">
                            <h3 className="font-bold text-slate-800 flex items-center gap-1">{user.name}, {user.age}{user.verified && <CheckCheck size={14} />}</h3>
                            <span className="text-xs text-slate-400 flex items-center gap-0.5"><MapPin size={10} /> {user.dist}</span>
                          </div>
                          <p className="text-sm text-slate-500 line-clamp-1 mt-1">{user.bio}</p>
                          <div className="flex gap-2 mt-2">{user.tags.slice(0,2).map(tag => (<span key={tag} className="text-[10px] px-2 py-0.5 bg-slate-100 text-slate-500 rounded-md font-medium">{tag}</span>))}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            )}
            {activeTab === 'chats' && (
              <div className="px-2">
                <div className="bg-white rounded-2xl shadow-sm border border-slate-100 divide-y divide-slate-50">
                  {[1,2,3,4].map(i => (
                    <div key={i} className="flex items-center gap-4 p-4 hover:bg-slate-50 cursor-pointer transition-colors">
                      <div className="w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center text-[#6200ea] font-bold">{String.fromCharCode(64+i)}</div>
                      <div className="flex-1">
                        <div className="flex justify-between"><span className="font-bold text-slate-800">Usuario {i}</span><span className="text-xs text-slate-400">12:30</span></div>
                        <p className="text-sm text-slate-500 truncate">Hola, ¬øc√≥mo est√°s? me gust√≥ tu perfil...</p>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}
            {activeTab === 'settings' && (
              <div className="px-5">
                <div className="bg-white rounded-3xl p-6 shadow-sm border border-slate-100 text-center mb-6">
                  <div className="w-24 h-24 mx-auto bg-slate-100 rounded-full flex items-center justify-center mb-4 text-[#6200ea]"><Users size={40} /></div>
                  <h2 className="text-xl font-bold text-slate-900">Mi Usuario</h2>
                  <p className="text-slate-500 text-sm mb-4">Plan Gratuito</p>
                  <button className="bg-[#6200ea] text-white px-6 py-2 rounded-xl font-semibold text-sm w-full shadow-lg">Editar Perfil</button>
                </div>
              </div>
            )}
          </main>
          <nav className={`fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-[380px] bg-slate-900 text-white rounded-2xl shadow-2xl flex justify-around items-center py-3 z-40 transition-all duration-500 ease-in-out ${showNav ? 'translate-y-0 opacity-100' : 'translate-y-[150%] opacity-0'}`}>
            <NavBtn active={activeTab==='discover'} icon={<Sparkles size={20} />} label="Inicio" onClick={() => setActiveTab('discover')} />
            <NavBtn active={activeTab==='chats'} icon={<MessageCircle size={20} />} label="Chats" badge={3} onClick={() => setActiveTab('chats')} />
            <NavBtn active={activeTab==='settings'} icon={<Users size={20} />} label="Perfil" onClick={() => setActiveTab('settings')} />
          </nav>
        </div>
      )
    }
    const root = ReactDOM.createRoot(document.getElementById('root'))
    root.render(<App />)
  </script>
</body>
</html>
